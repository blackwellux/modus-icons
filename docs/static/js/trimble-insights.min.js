/*! loglevel - v1.8.1 - https://github.com/pimterry/loglevel - (c) 2022 Tim Perry - licensed MIT */!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof module&&module.exports?module.exports=b():a.log=b()}(this,function(){"use strict";function a(a,b){var c=a[b];if("function"==typeof c.bind)return c.bind(a);try{return Function.prototype.bind.call(c,a)}catch{return function(){return Function.prototype.apply.apply(c,[a,arguments])}}}function b(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(c){return"debug"===c&&(c="log"),typeof console!==i&&("trace"===c&&j?b:void 0!==console[c]?a(console,c):void 0!==console.log?a(console,"log"):h)}function d(a,b){for(var d,c=0;c<k.length;c++)d=k[c],this[d]=c<a?h:this.methodFactory(d,a,b);this.log=this.debug}function e(a,b,c){return function(){typeof console!==i&&(d.call(this,b,c),this[a].apply(this,arguments))}}function f(a){return c(a)||e.apply(this,arguments)}function g(a,b,c){function e(a){var b=(k[a]||"silent").toUpperCase();if(typeof window!==i&&m){try{return void(window.localStorage[m]=b)}catch{}try{window.document.cookie=encodeURIComponent(m)+"="+b+";"}catch{}}}function g(){if(typeof window!==i&&m){try{a=window.localStorage[m]}catch{}if(typeof a===i)try{var a,b=window.document.cookie,c=b.indexOf(encodeURIComponent(m)+"=");-1!==c&&(a=/^([^;]+)/.exec(b.slice(c))[1])}catch{}return void 0===l.levels[a]&&(a=void 0),a}}function h(){if(typeof window!==i&&m){try{return void window.localStorage.removeItem(m)}catch{}try{window.document.cookie=encodeURIComponent(m)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}var n,m,j,l=this;b=b??"WARN",m="loglevel","string"==typeof a?m+=":"+a:"symbol"==typeof a&&(m=void 0),l.name=a,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=c||f,l.getLevel=function(){return j},l.setLevel=function(b,c){if("string"==typeof b&&void 0!==l.levels[b.toUpperCase()]&&(b=l.levels[b.toUpperCase()]),!("number"==typeof b&&b>=0&&b<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+b;if(j=b,!1!==c&&e(b),d.call(l,b,a),typeof console===i&&b<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(a){b=a,g()||l.setLevel(a,!1)},l.resetLevel=function(){l.setLevel(b,!1),h()},l.enableAll=function(a){l.setLevel(l.levels.TRACE,a)},l.disableAll=function(a){l.setLevel(l.levels.SILENT,a)},n=g(),n==null&&(n=b),l.setLevel(n,!1)}var n,h=function(){},i="undefined",j=typeof window!==i&&typeof window.navigator!==i&&/Trident\/|MSIE /.test(window.navigator.userAgent),k=["trace","debug","info","warn","error"],l=new g,m={};return l.getLogger=function(a){if("symbol"!=typeof a&&"string"!=typeof a||""===a)throw new TypeError("You must supply a name when creating a logger.");var b=m[a];return b||(b=m[a]=new g(a,l.getLevel(),l.methodFactory)),b},n=typeof window!==i?window.log:void 0,l.noConflict=function(){return typeof window!==i&&window.log===l&&(window.log=n),l},l.getLoggers=function(){return m},l.default=l,l}),!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),e.remote=r.exports}}(this,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=window,b=null;if(!f)throw new Error("Plugin for browser usage only");r=void 0;function s(e){try{return JSON.stringify(e)}catch(e){if(!r)try{var t={};t.a=t,JSON.stringify(t)}catch(e){r=e.message}if(e.message===r)return"[Circular]";throw e}}function w(c){var e="",l=0;return 1<c.length&&"string"==typeof c[0]&&(e=(e=c[0].replace(/(%?)(%([sdjo]))/g,function(e,t,r,n){if(t)return e;var a,o=c[l+=1],i="";switch(n){case"s":i+=o;break;case"d":i+=+o;break;case"j":i=s(o);break;case"o":a=s(o),"{"!==a[0]&&"["!==a[0]&&(a="<"+a+">"),i=function(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}(o)+a}return i})).replace(/%{2,2}/g,"%"),l+=1),c.length>l&&(e&&(e+=" "),e+=c.slice(l).join(" ")),e}p=Object.prototype.hasOwnProperty;function k(){try{throw new Error}catch(e){return e.stack}}function n(t){var r=this,n=[],o=[];this.length=function(){return n.length},this.sent=function(){return o.length},this.push=function(e){n.push(e),n.length>t&&n.shift()},this.send=function(){return o.length||(o=n,n=[]),o},this.confirm=function(){o=[],r.content=""},this.fail=function(){var e=1+n.length+o.length-t;0<e&&(o.splice(0,e),n=o.concat(n),r.confirm())}}var o=!!k(),j=void 0,a=void 0,v=void 0;function c(e){return"["+e.timestamp+"] "+e.level.label.toUpperCase()+(e.logger?" ("+e.logger+")":"")+": "+e.message+(e.stacktrace?`
`+e.stacktrace:"")}function l(){throw new Error("You can't set token for a not appled plugin")}var r,p,u=f.remote,g={url:"/logger",method:"POST",headers:{},token:"",onUnauthorized:function(){},timeout:0,interval:1e3,level:"trace",backoff:{multiplier:2,jitter:.1,limit:3e4},capacity:0,stacktrace:{levels:["trace","warn","error"],depth:3,excess:0},timestamp:function(){return(new Date).toISOString()},format:c},remote={noConflict:function(){return f.remote===remote&&(f.remote=u),remote},plain:c,json:function(e){return e.level=e.level.label,e},apply:function(e,t){if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(j)throw new Error("You can assign a plugin only one time");if(!f.XMLHttpRequest)return e;j=e,d=function e(){for(var n,o,t={},r=0;r<arguments.length;r+=1){n=Object(arguments[r]);for(o in n)p.call(n,o)&&(t[o]="object"!==i(n[o])||Array.isArray(n[o])?n[o]:e(t[o],n[o]))}return t}(g,t),d.capacity=d.capacity||500;var d,r=d.backoff,c="object"===(void 0===r?"undefined":i(r))?function(e){var t=e*r.multiplier;return t>r.limit&&(t=r.limit),t+=t*r.jitter*Math.random()}:r,l=d.interval,h=void 0,m=void 0,s=!1,u=!1;function y(){if(!u&&!s&&void 0!==d.token){if(!b.sent()){if(!b.length())return;var t,n,o,i,r,e=b.send();b.content=m?'{"logs":['+e.join(",")+"]}":e.join(`
`)}s=!0,t=new f.XMLHttpRequest,t.open(d.method,d.url,!0),t.setRequestHeader("Content-Type",h),d.token&&t.setRequestHeader("Authorization","Bearer "+d.token),r=d.headers;for(n in r)p.call(r,n)&&(o=r[n],o&&t.setRequestHeader(n,o));i=void 0,d.timeout&&(i=f.setTimeout(function(){s=!1,t.abort(),a()},d.timeout)),t.onreadystatechange=function(){if(4===t.readyState)if(s=!1,f.clearTimeout(i),200===t.status)l=d.interval,b.confirm(),a(!0);else{if(401===t.status){var e=d.token;d.token=void 0,d.onUnauthorized(e)}a()}},t.send(b.content)}function a(e){e||(l=c(l||1),b.fail()),u=!0,f.setTimeout(function(){u=!1,y()},l)}}return b=new n(d.capacity),a=e.methodFactory,v=function(s,e,u){var f=a(s,e,u),p=o&&d.stacktrace.levels.some(function(e){return e===s}),v=j.levels[s.toUpperCase()],g=v>=j.levels[d.level.toUpperCase()];return function(){for(var n,o,i,a,c,l,e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(g){if(n=d.timestamp(),o=p?k():"",o&&(i=o.split(`
`),i.splice(0,d.stacktrace.excess+3),a=d.stacktrace.depth,a&&i.length!==a+1?(o=i.splice(0,a).join(`
`),i.length&&(o+=`
    and `+i.length+" more")):o=i.join(`
`)),c=d.format({message:w(t),level:{label:s,value:v},logger:u||"",timestamp:n,stacktrace:o}),void 0===m&&(h=(m="string"!=typeof c)?"application/json":"text/plain"),l="",m)try{l+=JSON.stringify(c)}catch(e){return f.apply(void 0,t),void j.getLogger("logger").error(e)}else l+=c;b.push(l),y()}f.apply(void 0,t)}},e.methodFactory=v,e.setLevel(e.getLevel()),remote.setToken=function(e){d.token=e,y()},e},disable:function(){if(!j)throw new Error("You can't disable a not appled plugin");if(v!==j.methodFactory)throw new Error("You can't disable a plugin after appling another plugin");j.methodFactory=a,j.setLevel(j.getLevel()),j=void 0,remote.setToken=l},setToken:l,getQueueContent:function(){return b.send()}};t.default=remote,e.exports=t.default}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.tdcafLogger=e():t.tdcafLogger=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r,o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"sendEvent",function(){return dt}),n.d(e,"init",function(){return ft}),n.d(e,"getSessionId",function(){return ht}),n.d(e,"setGlobalAttributes",function(){return gt}),n.d(e,"trackEvents",function(){return mt}),n.d(e,"logNPSScore",function(){return vt}),n.d(e,"toggleNPSWindow",function(){return yt}),n.d(e,"toggleRuleBasedNPSWindow",function(){return wt}),n.d(e,"getUsersEventCount",function(){return _t}),n.d(e,"setUserIdForSession",function(){return bt}),n.d(e,"DisplayDialogEvent",function(){return h}),n.d(e,"CloseDialogEvent",function(){return g}),n.d(e,"BaseEvent",function(){return c}),n.d(e,"ClickEvent",function(){return s}),n.d(e,"DeviceInfoEvent",function(){return Y}),n.d(e,"PageViewEvent",function(){return M}),n.d(e,"SessionEndEvent",function(){return J}),n.d(e,"SessionStartEvent",function(){return U}),o={};function r(t){o={...o,...t}}var o,i,b,a=function(){return(a=Object.assign||function(t){for(var e,r,n=1,o=arguments.length;n<o;n++)for(r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c=function(){function t(t,e,n){this.event=t,this.group=e,this.props=n,this.sessionId=ot(),this.timestamp=+new Date}return t.prototype.toString=function(){return JSON.stringify(a({event:this.event,group:this.group,sessionId:this.sessionId,timestamp:this.timestamp},this.props))},t.prototype.toLoggableObject=function(){return a({event:this.event,group:this.group,sessionId:this.sessionId,timestamp:this.timestamp},this.props)},t}(),u=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=t.call(this,"CLICK","USER_ACTIVITY",e)||this;return n.props=e,n}return u(e,t),e}(c),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(t){function e(e){var n=t.call(this,"USER_RESPONSE","NPS_SURVEY",e)||this;return n.props=e,n}return l(e,t),e}(c),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=function(t){function e(e){var n=t.call(this,"USER_FEEDBACK","NPS_SURVEY",e)||this;return n.props=e,n}return d(e,t),e}(c),h=function(){},g=function(){},m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=function(t){function e(e){var n=t.call(this,"NPS_DIALOG_DISPLAY","NPS_SURVEY",e)||this;return n.props=e,n}return m(e,t),e}(c),y=function(t){function e(e){var n=t.call(this,"NPS_DIALOG_CLOSE","NPS_SURVEY",e)||this;return n.props=e,n}return m(e,t),e}(c),w=function(){function t(){}return t.prototype.displayDialog=function(t){return T(new v({feature:t.feature,eventCount:t.eventCount}))},t.prototype.closeDialog=function(t){return T(new y({feature:t.feature}))},t}();const _="https://api-insights.trimble.com";b="";function E(){return b}var S="",O={},x=new Map,I=new Map,P=new w;function j(){let t=document.getElementById("modal_id");t&&t.remove();let e=new g;e.feature=S,P.closeDialog(e)}function L(t,e){return T(new p({npsSurveyScore:t,...e}))}function N(t,e,n,o){S=o,r=document.createElement("link"),r.rel="stylesheet",r.href="https://modus.trimble.com/css/modus.min.css",document.getElementsByTagName("head")[0].appendChild(r),i=document.createElement("style"),i.type="text/css",i.innerHTML=`.modal-container { position: absolute;
        background: rgb(rgb(151, 149, 149), green, blue);
        padding: 20px;
        bottom: 0;
        right: 0;
        z-index: 10040;
        overflow: auto;
        overflow-y: auto;
        box-shadow: gray 10px 10px 10px 10px; }
        .mostLikely {
            margin-top: "4px";
            float: right;
        }
        .notLikely {
            margin-top: "4px";
            float: left;
        }
        .hideDiv {
            display:none
        }
        .showDiv {
            display: block
        }
        .feedbackBox {
            height: 70px;
            width: 400px;
        }
        .submitButton {
            margin-top: 4px;
        }
        `,document.getElementsByTagName("head")[0].appendChild(i);var s,i,r,l,d,u,m,p,g,v,b,y,_,a=document.getElementById("root"),c=document.createElement("div");c.classList.add("modal"),c.classList.add("d-block"),c.setAttribute("role","dialog"),c.setAttribute("id","modal_id"),u=document.createElement("div"),u.classList.add("modal-container"),s=document.createElement("button"),s.type="button",s.innerHTML="x",s.classList.add("close"),s.setAttribute("data-dismiss","modal"),s.onclick=j,u.append(s),l=document.createElement("div"),p=document.createElement("p"),p.textContent+=t||"How likely are you to recommend us to a friend or colleague?",l.append(p),d=document.createElement("div"),d.classList.add("hideDiv"),g=document.createElement("p"),g.textContent+="Any other suggestions?",d.append(g),m=document.createElement("input"),m.type="text",m.id="feedbackInput",m.classList.add("feedbackBox"),d.append(m),v=document.createElement("div"),y=document.createElement("button"),y.classList.add("submitButton"),y.type="button",y.innerText="Submit",y.classList.add("btn"),y.classList.add("btn-primary"),y.onclick=function(){!function(t,e){T(new f({npsSurveyFeedback:t,...e}))}(document.getElementById("feedbackInput").value,{feature:o}),j()},v.append(y),d.append(v);for(let t=1;t<=10;t++){let e=document.createElement("button");e.type="button",e.id="button"+t,e.classList.add("btn"),e.classList.add("btn-primary"),e.classList.add("btn-sm"),e.classList.add("m-1"),e.innerText=t,e.onclick=function(t){l.classList.add("hideDiv"),d.classList.add("showDiv"),L(t.target.innerText,{feature:o})},l.append(e)}let w=document.createElement("div");_=document.createElement("p"),_.textContent+=e||"Not likely",_.classList.add("notLikely"),w.append(_),b=document.createElement("p"),b.textContent+=n||"Most likely",b.classList.add("mostLikely"),w.append(b),l.appendChild(w),u.append(l),u.append(d),c.appendChild(u),a.appendChild(c);let E=new h;E.feature=o,E.eventCount=x.get(o),P.displayDialog(E)}function k(t,e,n){let o=e-t%e;return x.get(n)-t>=o}function C(t){O=t.nps;for(const[t,e]of Object.entries(O)){let t=x.get(e.eventName);t?x.set(e.eventName,t+parseInt(e.eventCount)):x.set(e.eventName,parseInt(e.eventCount)),D()}}function D(){let t={};for(const[e,n]of Object.entries(O)){let o=x.get(n.eventName)?x.get(n.eventName):n.eventCount;if("once every"===n.ruleCondition)if("count"==n.ruleType)o%n.triggerPoint==0||k(n.survey.displayedAt,n.triggerPoint,e)?t.showNPSDialog=!0:t.showNPSDialog=!1;else if("duration"==n.ruleType){const e=new Date(n.survey.lastDisplayed),o=new Date,r=Math.abs(o-e),i=Math.ceil(r/864e5);let a=n.triggerPoint.split("D")[0];t.showNPSDialog=i>=a}I.set(n.eventName,t.showNPSDialog)}}async function A(){try{C(await async function(){try{let t=E();if(t){let e="/configuration?config=nps&uid="+t,n=await fetch(_+e,{keepalive:!0,method:"GET",headers:{"x-api-key":st(),"x-app-name":lt()}});return await n.json()}return console.log("Global uid is not set"),null}catch(t){console.log("Error occured while fetching user event count",t)}}())}catch(t){console.log("Error occured while fetching user event count",t)}}var T=function(t){ut(t.toLoggableObject()),pt()&&function(t){if(x){let e=1;x.has(t)&&(e=parseInt(x.get(t))+1),x.set(t,e)}}(t.event)},V=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),U=function(t){function e(e){var n=t.call(this,"SESSION_START","SESSION",e)||this;return n.props=e,n}return V(e,t),e}(c),B={url:_+"/datalogger",method:"POST",headers:{},timeout:0,interval:12e4,isNPSEnabled:!1,level:"trace",backoff:{multiplier:2,jitter:.1,limit:3e4},capacity:2e3,stacktrace:{levels:["trace","warn","error"],depth:3,excess:0},timestamp:()=>(new Date).toISOString(),format:remote.json},R=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),M=function(t){function e(e){var n=t.call(this,"PAGE_VISIT","USER_ACTIVITY",e)||this;return n.props=e,n}return R(e,t),e}(c),G=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Y=function(t){function e(e){var n=t.call(this,"DEVICE_INFO","DEVICE",e)||this;return n.props=e,n}return G(e,t),e}(c),F=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),J=function(t){function e(e){var n=t.call(this,"SESSION_END","SESSION",e)||this;return n.props=e,n}return F(e,t),e}(c),H=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),K=function(t){function e(e){var n=t.call(this,"USER_LOCATION","USER",e)||this;return n.props=e,n}return H(e,t),e}(c),W={pageVisits:!0,location:!0,deviceInfo:!0,clicks:!0};function q(){var t;tt(),pt()&&A().then(()=>{console.log("evaluation of nps snapshot done")}),W.pageVisits&&T(new M({pageVisited:window.location.pathname})),W.location&&(console.log("add location"),fetch(_+"/deviceinfo",{keepalive:!0,method:"GET",headers:{"x-api-key":st()}}).then(function(t){t.json().then(function(t){T(new K({ip_address:t.body.clientIp}))})}).catch(function(t){return console.log("err during location fetch:",t)})),window.addEventListener("unload",z),W.clicks&&(document.onreadystatechange=()=>{"complete"===document.readyState&&X()}),W.pageVisits&&(history.pushState=(t=history.pushState,function(){var e=t.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),e}),window.addEventListener("popstate",()=>{window.dispatchEvent(new Event("locationchange"))}),window.addEventListener("locationchange",function(){T(new M({pageVisited:window.location.pathname})),setTimeout(function(){W.clicks&&X()},100)}))}function z(){if(!nt)return;let e=+new Date,n=remote.getQueueContent()||[],o=[];if(n.forEach(t=>{o=[...o,JSON.parse(t)]}),W.deviceInfo){let t={message:new Y({width:window.screen.width,height:window.screen.height,platform:window.navigator.platform,userAgent:window.navigator.userAgent,sessionId:ot(),timestamp:e}).toString()};o=[...o,t]}let r={message:(new J).toString()};o=[...o,r];const i=fetch(B.url,{keepalive:!0,method:"POST",headers:{"Content-Type":"application/json",...B.headers},body:JSON.stringify({logs:o})}).then(t=>console.log("res :",t)).catch(t=>console.log("err :",t));console.log("request",i)}function Q(){var t,e=0;function n(){e=0}document.onclick=n,document.onmousemove=n,document.onkeypress=n,t=window.setInterval(function(){(e+=60)>=1800&&(window.clearInterval(t),z(),et=null,nt=!1)},6e4)}function X(){Z(document.getElementsByTagName("a"),"click",$),Z(document.getElementsByTagName("button"),"click",$)}function Z(t,e,n){for(var o=0;o<t.length;o++)t[o].addEventListener(e,n)}function $(){var t={type:"click",location:window.location.href,pathname:window.location.pathname,hash:window.location.hash,referer:document.referrer,language:window.navigator.userLanguage||window.navigator.language,width:screen.width,height:screen.height,platform:window.navigator.platform,userAgent:window.navigator.userAgent,local_time:new Date};t.destination=this.getAttribute("href"),t.name=this.getAttribute("name"),t.id=this.getAttribute("id"),t.displayText=this.innerText,t.event="CLICK",t.group="USER_ACTIVITY",t.event=t.type.toUpperCase(),T(new s(t))}function tt(){!function(){nt=!0;var t=(new Date).getTime();et="xxyxxxyxxxxxxxxy".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)})}(),T(new U),Q()}var et=null,nt=!1;function ot(){return et||tt(),et}var rt=null,it=null,at=null,ct=!1;const ut=t=>{t.sessionId||(t.sessionId=ot()),t.timestamp||(t.timestamp=+new Date),t={...t,...o},rt.info(""+JSON.stringify(t))},st=()=>it,lt=()=>at,pt=()=>ct;function dt(t){return T(t)}function ft(t){return(t=>{console.log("Inside initLogger"),console.log(JSON.stringify(t)),B.url=t.url?t.url:B.url,B.interval=t.interval?t.interval:B.interval,B.headers=t.headers?t.headers:B.headers,ct=!!t.isNpsEnabled&&t.isNpsEnabled,remote.apply(log,B),(rt=log.getLogger(t.appName||"TDCAF")).enableAll(),it=B.headers["x-api-key"],at=B.headers["x-app-name"],Object.assign(W,t.trackEvents)})(t)}function ht(){return ot()}function gt(t){return r(t)}function mt(){return q()}function vt(t,e){return L(t,e)}function yt(t,e,n,o){return N(t,e,n,o)}function wt(t,e,n,o){return function(t,e,n,o){if(D(),pt()&&!0===I.get(o))return N(t,e,n,o)}(t,e,n,o)}function _t(){return async function(){try{let t=E();if(t){let e=await fetch(_+"/usereventcount",{keepalive:!0,method:"GET",headers:{"x-api-key":st(),"x-app-name":lt(),"x-uid":t}});return await e.json()}return console.log("Global uid is not set"),null}catch(t){console.log("Error occured while fetching user event count",t)}}()}function bt(t){return function(t){b=t;let e={};e.insightsUid=b,r(e)}(t)}}])})
